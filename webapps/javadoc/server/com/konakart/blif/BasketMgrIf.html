<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Wed Aug 27 11:46:01 BST 2014 -->
<TITLE>
BasketMgrIf (KonaKart Server Engine API Documentation)
</TITLE>

<META NAME="date" CONTENT="2014-08-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BasketMgrIf (KonaKart Server Engine API Documentation)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/AdminEngineMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/BillingMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/BasketMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BasketMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.konakart.blif</FONT>
<BR>
Interface BasketMgrIf</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../com/konakart/bl/BasketMgr.html" title="class in com.konakart.bl">BasketMgr</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>BasketMgrIf</B></DL>
</PRE>

<P>
BasketMgrIf
 
 Interface which an implementation of this manager must adhere to.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)">addToBasket</A></B>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerId,
            <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines the customerId to use and calls the private method with the customerId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">addToBasketWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                       <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If options is set to null, this method is identical to addToBasket().</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#createEncodedProduct(int, com.konakart.appif.OptionIf[])">createEncodedProduct</A></B>(int&nbsp;productId,
                     <A HREF="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</A>[]&nbsp;opts)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)">findOptionInProduct</A></B>(<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>&nbsp;p,
                    <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>&nbsp;o)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The basket object must have a populated product object with options.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomer(java.lang.String, int, int)">getBasketItemsPerCustomer</A></B>(java.lang.String&nbsp;sessionId,
                          int&nbsp;customerId,
                          int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the basket items for a customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)">getBasketItemsPerCustomerWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                                     int&nbsp;customerId,
                                     int&nbsp;languageId,
                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the basket items for a customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#mergeBaskets(java.lang.String, int)">mergeBaskets</A></B>(java.lang.String&nbsp;sessionId,
             int&nbsp;customerFromId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)">mergeBasketsWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerFromId,
                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">populateOptsForBasketItem</A></B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                          int&nbsp;priceId,
                          int&nbsp;languageId,
                          <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#removeBasketItemsPerCustomer(java.lang.String, int)">removeBasketItemsPerCustomer</A></B>(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the private method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)">removeFromBasket</A></B>(java.lang.String&nbsp;sessionId,
                 int&nbsp;customerId,
                 <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We must remove the customers_basket record and any associated customers_basket_attributes
 records.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)">updateBasket</A></B>(java.lang.String&nbsp;sessionId,
             int&nbsp;customerId,
             <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the sessionId is null, we check the customerId to ensure that it is negative.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerId,
                        <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the sessionId is null, we check the customerId to ensure that it is negative.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfo(com.konakart.appif.BasketIf[])">updateBasketWithStockInfo</A></B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives an array of basket items and updates each one with the current stock level.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithStockInfoWithOptions</A></B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems,
                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives an array of basket items and updates each one with the current stock level.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getBasketItemsPerCustomer(java.lang.String, int, int)"><!-- --></A><H3>
getBasketItemsPerCustomer</H3>
<PRE>
<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerCustomer</B>(java.lang.String&nbsp;sessionId,
                                   int&nbsp;customerId,
                                   int&nbsp;languageId)
                                   throws java.lang.Exception</PRE>
<DL>
<DD>Get the basket items for a customer. We determine which customerId to use and then call the
 private method. Although we read the final_price from the db, we set it through a calculation
 since OsCommerce doesn't store this in the DB. We do store it in the DB but never use it
 directly from the DB.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Basket Items
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
getBasketItemsPerCustomerWithOptions</H3>
<PRE>
<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerCustomerWithOptions</B>(java.lang.String&nbsp;sessionId,
                                              int&nbsp;customerId,
                                              int&nbsp;languageId,
                                              <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                                              throws java.lang.Exception</PRE>
<DL>
<DD>Get the basket items for a customer. We determine which customerId to use and then call the
 private method. Although we read the final_price from the db, we set it through a calculation
 since OsCommerce doesn't store this in the DB. We do store it in the DB but never use it
 directly from the DB.
 
 If options is set to null then this call is identical to getBasketItemsPerCustomer(). The
 options may determine from where we read the price and quantity of the basket items.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>languageId</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Basket Items
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
addToBasketWithOptions</H3>
<PRE>
int <B>addToBasketWithOptions</B>(java.lang.String&nbsp;sessionId,
                           int&nbsp;customerId,
                           <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                           <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                           throws java.lang.Exception</PRE>
<DL>
<DD>If options is set to null, this method is identical to addToBasket(). Otherwise the
 functionality differs depending on the combination of options set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the newly created Basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
addToBasket</H3>
<PRE>
int <B>addToBasket</B>(java.lang.String&nbsp;sessionId,
                int&nbsp;customerId,
                <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                throws java.lang.Exception</PRE>
<DL>
<DD>Determines the customerId to use and calls the private method with the customerId.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the newly created Basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)"><!-- --></A><H3>
findOptionInProduct</H3>
<PRE>
<A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A> <B>findOptionInProduct</B>(<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>&nbsp;p,
                           <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>&nbsp;o)
                           throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></PRE>
<DL>
<DD>The basket object must have a populated product object with options. The option passed in as
 a parameter is only partially populated so we try to find it in the array of options of the
 product and return the fully populated one.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>p</CODE> - <DD><CODE>o</CODE> - 
<DT><B>Returns:</B><DD>Option
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
updateBasket</H3>
<PRE>
void <B>updateBasket</B>(java.lang.String&nbsp;sessionId,
                  int&nbsp;customerId,
                  <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                  throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                         com.workingdogs.village.DataSetException,
                         java.lang.Exception</PRE>
<DL>
<DD>If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
updateBasketWithOptions</H3>
<PRE>
void <B>updateBasketWithOptions</B>(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerId,
                             <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                             <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                             throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                                    com.workingdogs.village.DataSetException,
                                    java.lang.Exception</PRE>
<DL>
<DD>If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 If options is set to null, this method is identical to updateBasket(). Otherwise the
 functionality differs depending on the combination of options set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeBasketItemsPerCustomer(java.lang.String, int)"><!-- --></A><H3>
removeBasketItemsPerCustomer</H3>
<PRE>
void <B>removeBasketItemsPerCustomer</B>(java.lang.String&nbsp;sessionId,
                                  int&nbsp;customerId)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the private method.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
removeFromBasket</H3>
<PRE>
void <B>removeFromBasket</B>(java.lang.String&nbsp;sessionId,
                      int&nbsp;customerId,
                      <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                      throws java.lang.Exception</PRE>
<DL>
<DD>We must remove the customers_basket record and any associated customers_basket_attributes
 records.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createEncodedProduct(int, com.konakart.appif.OptionIf[])"><!-- --></A><H3>
createEncodedProduct</H3>
<PRE>
java.lang.String <B>createEncodedProduct</B>(int&nbsp;productId,
                                      <A HREF="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</A>[]&nbsp;opts)</PRE>
<DL>
<DD>Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3. The order is very important (product option ids increasing)
 since this the encoded product has to match regardless of the ordering of the options in the
 ops array.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>productId</CODE> - <DD><CODE>opts</CODE> - 
<DT><B>Returns:</B><DD>The encoded string</DL>
</DD>
</DL>
<HR>

<A NAME="mergeBaskets(java.lang.String, int)"><!-- --></A><H3>
mergeBaskets</H3>
<PRE>
void <B>mergeBaskets</B>(java.lang.String&nbsp;sessionId,
                  int&nbsp;customerFromId)
                  throws java.lang.Exception</PRE>
<DL>
<DD>Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerFromId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
mergeBasketsWithOptions</H3>
<PRE>
void <B>mergeBasketsWithOptions</B>(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerFromId,
                             <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                             throws java.lang.Exception</PRE>
<DL>
<DD>Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.
 
 If options is set to null then this call is identical to mergeBaskets(). The options may
 determine from where we read the price and quantity of the basket items.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerFromId</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithStockInfo(com.konakart.appif.BasketIf[])"><!-- --></A><H3>
updateBasketWithStockInfo</H3>
<PRE>
<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>updateBasketWithStockInfo</B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems)
                                   throws java.lang.Exception</PRE>
<DL>
<DD>Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>basketItems</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of basket items with updated stock level
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
updateBasketWithStockInfoWithOptions</H3>
<PRE>
<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>updateBasketWithStockInfoWithOptions</B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems,
                                              <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                                              throws java.lang.Exception</PRE>
<DL>
<DD>Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.
 
 If options is set to null, this method is identical to updateBasketWithStockInfo(). Otherwise
 the functionality differs depending on the combination of options set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>basketItems</CODE> - <DD><CODE>options</CODE> - An object containing options for the method. It may be set to null.
<DT><B>Returns:</B><DD>Returns an array of basket items with updated stock level
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
populateOptsForBasketItem</H3>
<PRE>
void <B>populateOptsForBasketItem</B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                               int&nbsp;priceId,
                               int&nbsp;languageId,
                               <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)
                               throws java.lang.Exception</PRE>
<DL>
<DD>The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the opts attribute and the productId attribute of the
 Basket object passed in.<br>
 An exception is thrown if the product options no longer exist.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>item</CODE> - <DD><CODE>priceId</CODE> - <DD><CODE>languageId</CODE> - <DD><CODE>a2bOptions</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/AdminEngineMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/BillingMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/BasketMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BasketMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2011 DS Data Systems UK Ltd.
</BODY>
</HTML>

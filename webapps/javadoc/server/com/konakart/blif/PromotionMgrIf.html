<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Wed Aug 27 11:46:01 BST 2014 -->
<TITLE>
PromotionMgrIf (KonaKart Server Engine API Documentation)
</TITLE>

<META NAME="date" CONTENT="2014-08-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PromotionMgrIf (KonaKart Server Engine API Documentation)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/ProductMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/PunchOutMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/PromotionMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PromotionMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.konakart.blif</FONT>
<BR>
Interface PromotionMgrIf</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../com/konakart/bl/PromotionMgr.html" title="class in com.konakart.bl">PromotionMgr</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>PromotionMgrIf</B></DL>
</PRE>

<P>
PromotionMgrIf
 
 Interface which an implementation of this manager must adhere to.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#checkCoupon(java.lang.String)">checkCoupon</A></B>(java.lang.String&nbsp;couponCode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to verify whether a coupon code actually exists and if it does, whether
 the coupon is still active.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getAllPromotions()">getAllPromotions</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an array of all active promotions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getCouponPerId(int, com.konakart.appif.CouponOptionsIf)">getCouponPerId</A></B>(int&nbsp;couponId,
               <A HREF="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a coupon for the coupon id passed in as a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getCouponsPerCode(java.lang.String, com.konakart.appif.CouponOptionsIf)">getCouponsPerCode</A></B>(java.lang.String&nbsp;couponCode,
                  <A HREF="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an array of coupons for the coupon code passed in as a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionIdForGiftCertificate(com.konakart.appif.OrderProductIf)">getPromotionIdForGiftCertificate</A></B>(<A HREF="../../../com/konakart/appif/OrderProductIf.html" title="interface in com.konakart.appif">OrderProductIf</A>&nbsp;op)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the promotion id for an order product object containing a gift certificate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getPromotions(java.lang.String, com.konakart.app.Order)">getPromotions</A></B>(java.lang.String&nbsp;orderTotalCode,
              <A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We return all active promotions for the orderTotalCode passed in as a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerCoupon(java.lang.String, int, com.konakart.appif.PromotionOptionsIf)">getPromotionsPerCoupon</A></B>(java.lang.String&nbsp;couponCode,
                       int&nbsp;couponId,
                       <A HREF="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to return an array of promotions associated with the coupon(s) identified
 by the input parameters.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#getPromotionsPerProducts(java.lang.String, int, com.konakart.appif.ProductIf[], com.konakart.appif.PromotionIf[], java.lang.String[], com.konakart.appif.PromotionOptionsIf)">getPromotionsPerProducts</A></B>(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         <A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>[]&nbsp;products,
                         <A HREF="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</A>[]&nbsp;promotions,
                         java.lang.String[]&nbsp;couponCodes,
                         <A HREF="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#insertCoupon(com.konakart.appif.CouponIf, int)">insertCoupon</A></B>(<A HREF="../../../com/konakart/appif/CouponIf.html" title="interface in com.konakart.appif">CouponIf</A>&nbsp;coupon,
             int&nbsp;promotionId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert a coupon and associate it with the promotion referenced by promotionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#refreshConfigs()">refreshConfigs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Refresh the configuration of the Promotion manager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/PromotionMgrIf.html#updatePromotionUsage(com.konakart.app.Order)">updatePromotionUsage</A></B>(<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the order has any associated coupons we iterate through the coupons and increment the
 timesUsed attribute.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getPromotions(java.lang.String, com.konakart.app.Order)"><!-- --></A><H3>
getPromotions</H3>
<PRE>
<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[] <B>getPromotions</B>(java.lang.String&nbsp;orderTotalCode,
                          <A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)
                          throws java.lang.Exception</PRE>
<DL>
<DD>We return all active promotions for the orderTotalCode passed in as a parameter. The
 promotion may only apply for a subset of the products within the order so we return this
 information as an attribute of the Promotion object.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderTotalCode</CODE> - <DD><CODE>order</CODE> - 
<DT><B>Returns:</B><DD>An array of promotion objects
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updatePromotionUsage(com.konakart.app.Order)"><!-- --></A><H3>
updatePromotionUsage</H3>
<PRE>
void <B>updatePromotionUsage</B>(<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)
                          throws org.apache.torque.TorqueException,
                                 com.workingdogs.village.DataSetException</PRE>
<DL>
<DD>If the order has any associated coupons we iterate through the coupons and increment the
 timesUsed attribute. If the order has any associated promotions that were linked to the
 customer directly through the promotion_to_customer table, then we retrieve these records and
 increment the timesUsed attribute.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>order</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>org.apache.torque.TorqueException</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPromotionIdForGiftCertificate(com.konakart.appif.OrderProductIf)"><!-- --></A><H3>
getPromotionIdForGiftCertificate</H3>
<PRE>
int <B>getPromotionIdForGiftCertificate</B>(<A HREF="../../../com/konakart/appif/OrderProductIf.html" title="interface in com.konakart.appif">OrderProductIf</A>&nbsp;op)
                                     throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                                            org.apache.torque.TorqueException,
                                            com.workingdogs.village.DataSetException</PRE>
<DL>
<DD>Get the promotion id for an order product object containing a gift certificate. A negative id
 is returned if a promotion doesn't exist.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>op</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the promotion or -1 if a promotion doesn't exist.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE>
<DD><CODE>org.apache.torque.TorqueException</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="insertCoupon(com.konakart.appif.CouponIf, int)"><!-- --></A><H3>
insertCoupon</H3>
<PRE>
int <B>insertCoupon</B>(<A HREF="../../../com/konakart/appif/CouponIf.html" title="interface in com.konakart.appif">CouponIf</A>&nbsp;coupon,
                 int&nbsp;promotionId)
                 throws java.lang.Exception</PRE>
<DL>
<DD>Insert a coupon and associate it with the promotion referenced by promotionId. If the
 promotionId is a negative number then no association is done.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>coupon</CODE> - <DD><CODE>promotionId</CODE> - 
<DT><B>Returns:</B><DD>Returns the coupon Id
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="checkCoupon(java.lang.String)"><!-- --></A><H3>
checkCoupon</H3>
<PRE>
int <B>checkCoupon</B>(java.lang.String&nbsp;couponCode)
                throws com.workingdogs.village.DataSetException,
                       org.apache.torque.TorqueException</PRE>
<DL>
<DD>This method is used to verify whether a coupon code actually exists and if it does, whether
 the coupon is still active. Valid return values for this method are:
 <ul>
 <li>com.konakart.bl.PromotionMgr.COUPON_DOESNT_EXIST - The coupon code does not exist.</li>
 <li>com.konakart.bl.PromotionMgr.COUPON_EXISTS_ACTIVE - The coupon code does exist and the
 coupon is still active.</li>
 <li>com.konakart.bl.PromotionMgr.COUPON_EXISTS_INACTIVE - The coupon code does exist but the
 coupon is no longer active since the number of times it has been used has reached the maximum
 number of times allowed.</li>
 </ul>
 Even if the coupon exists and is active, it won't actually do anything if it isn't connected
 to a valid promotion and any rules associated with the promotion are also satisfied. However,
 this method may still be used to at least warn a customer that he may have mistyped the
 coupon code or that it is no longer valid.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>couponCode</CODE> - The coupon code
<DT><B>Returns:</B><DD>Returns an integer
<DT><B>Throws:</B>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE>org.apache.torque.TorqueException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getAllPromotions()"><!-- --></A><H3>
getAllPromotions</H3>
<PRE>
<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[] <B>getAllPromotions</B>()
                             throws java.lang.Exception</PRE>
<DL>
<DD>Returns an array of all active promotions
<P>
<DD><DL>

<DT><B>Returns:</B><DD>Returns an array of all active promotions
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPromotionsPerProducts(java.lang.String, int, com.konakart.appif.ProductIf[], com.konakart.appif.PromotionIf[], java.lang.String[], com.konakart.appif.PromotionOptionsIf)"><!-- --></A><H3>
getPromotionsPerProducts</H3>
<PRE>
<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>[] <B>getPromotionsPerProducts</B>(java.lang.String&nbsp;sessionId,
                                     int&nbsp;customerId,
                                     <A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>[]&nbsp;products,
                                     <A HREF="../../../com/konakart/appif/PromotionIf.html" title="interface in com.konakart.appif">PromotionIf</A>[]&nbsp;promotions,
                                     java.lang.String[]&nbsp;couponCodes,
                                     <A HREF="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</A>&nbsp;options)
                                     throws java.lang.Exception</PRE>
<DL>
<DD>This method is used to calculate a discount on individual products so that the discount can
 be displayed without having to add the product to the cart.<br>
 The method receives an array of products and returns an array of products with attached
 PromotionResult objects that contain the results of one or more of the promotions passed in
 as a parameter. The PromotionResult contains the value of the discount, whether it is an
 amount or a percentage discount and also information regarding the promotion it applies to.
 If a product has an array of ProductQuantity objects (one for each SKU) each one of these may
 have an array of PromotionResult objects since a promotion may only apply to one product
 configuration and not to another (i.e. blue shirt and not red shirt).<br>
 The PromotionOptions object can be configured so that the values of the promotions for a
 product are subtracted from the product price. The options allow you to set rules that
 determine whether in this case the promotions need to be cumulative or whether the largest or
 smallest should be chosen. The calculation is only made for products with a single array of
 PromotionResult objects. It is not calculated for products that have an array of
 PromotionResult objects for each ProductQuantity.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - Only used if the customer is logged in. Otherwise set to null.<DD><CODE>customerId</CODE> - If the sessionId is set to null then the customerId should contain the id of the
            temporary user which is a negative number. The temporary user id can be used for
            evaluating expression rules.<DD><CODE>products</CODE> - An array of products to be processed<DD><CODE>promotions</CODE> - The promotions which will be applied to the products if all rules are matched.<DD><CODE>couponCodes</CODE> - Coupon codes to use. If none of the promotions require coupons, it should be set
            to null<DD><CODE>options</CODE> - An object containing information to configure the calculation for applying one or
            more promotion results to the product price.
<DT><B>Returns:</B><DD>Returns the same array of products passed in as a parameter with attached
         PromotionResult objects if applicable
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="refreshConfigs()"><!-- --></A><H3>
refreshConfigs</H3>
<PRE>
void <B>refreshConfigs</B>()
                    throws java.lang.Exception</PRE>
<DL>
<DD>Refresh the configuration of the Promotion manager
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getCouponsPerCode(java.lang.String, com.konakart.appif.CouponOptionsIf)"><!-- --></A><H3>
getCouponsPerCode</H3>
<PRE>
<A HREF="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</A>[] <B>getCouponsPerCode</B>(java.lang.String&nbsp;couponCode,
                           <A HREF="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</A>&nbsp;options)
                           throws java.lang.Exception</PRE>
<DL>
<DD>Returns an array of coupons for the coupon code passed in as a parameter.
 <p>
 The options object allows you to specify that only active coupons should be returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>couponCode</CODE> - <DD><CODE>options</CODE> - Allows you to specify that only active coupons should be returned
<DT><B>Returns:</B><DD>Returns an array of coupons. An empty array is returned if no coupons are available.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getCouponPerId(int, com.konakart.appif.CouponOptionsIf)"><!-- --></A><H3>
getCouponPerId</H3>
<PRE>
<A HREF="../../../com/konakart/app/Coupon.html" title="class in com.konakart.app">Coupon</A> <B>getCouponPerId</B>(int&nbsp;couponId,
                      <A HREF="../../../com/konakart/appif/CouponOptionsIf.html" title="interface in com.konakart.appif">CouponOptionsIf</A>&nbsp;options)
                      throws java.lang.Exception</PRE>
<DL>
<DD>Returns a coupon for the coupon id passed in as a parameter.
 <p>
 The options object allows you to specify that only active coupons should be returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>couponId</CODE> - <DD><CODE>options</CODE> - Allows you to specify that only active coupons should be returned
<DT><B>Returns:</B><DD>Returns a coupon object or null if a coupon isn't available.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPromotionsPerCoupon(java.lang.String, int, com.konakart.appif.PromotionOptionsIf)"><!-- --></A><H3>
getPromotionsPerCoupon</H3>
<PRE>
<A HREF="../../../com/konakart/app/Promotion.html" title="class in com.konakart.app">Promotion</A>[] <B>getPromotionsPerCoupon</B>(java.lang.String&nbsp;couponCode,
                                   int&nbsp;couponId,
                                   <A HREF="../../../com/konakart/appif/PromotionOptionsIf.html" title="interface in com.konakart.appif">PromotionOptionsIf</A>&nbsp;options)
                                   throws java.lang.Exception</PRE>
<DL>
<DD>This method is used to return an array of promotions associated with the coupon(s) identified
 by the input parameters. The method will either use the couponCode or the couponId parameter.
 The couponCode is used if not null, otherwise couponId is used. Note that multiple coupons
 may share the same coupon code.
 <p>
 The PromotionOptions may be used to control whether or not to use expired coupons and whether
 or not to return expired promotions. The default is to not check whether coupons or
 promotions have expired.
 <p>
 If no promotions are found, an empty array is returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>couponCode</CODE> - The code of the coupon<DD><CODE>couponId</CODE> - The unique numeric id of the coupon<DD><CODE>options</CODE> - A PromotionOptions object to control whether or not to use expired coupons and
            whether or not to return expired promotions
<DT><B>Returns:</B><DD>Returns an array of promotions
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/ProductMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/PunchOutMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/PromotionMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PromotionMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2011 DS Data Systems UK Ltd.
</BODY>
</HTML>

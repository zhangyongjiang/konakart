<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Wed Aug 27 11:46:01 BST 2014 -->
<TITLE>
OrderMgrIf (KonaKart Server Engine API Documentation)
</TITLE>

<META NAME="date" CONTENT="2014-08-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OrderMgrIf (KonaKart Server Engine API Documentation)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/MultiStoreMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/OrderTotalMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/OrderMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.konakart.blif</FONT>
<BR>
Interface OrderMgrIf</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../com/konakart/bl/OrderMgr.html" title="class in com.konakart.bl">OrderMgr</A>, <A HREF="../../../com/konakart/bl/OrderMgrEE.html" title="class in com.konakart.bl">OrderMgrEE</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>OrderMgrIf</B></DL>
</PRE>

<P>
OrderMgrIf
 
 Interface which an implementation of this manager must adhere to.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#changeDeliveryAddress(java.lang.String, com.konakart.appif.OrderIf, com.konakart.appif.AddressIf)">changeDeliveryAddress</A></B>(java.lang.String&nbsp;sessionId,
                      <A HREF="../../../com/konakart/appif/OrderIf.html" title="interface in com.konakart.appif">OrderIf</A>&nbsp;order,
                      <A HREF="../../../com/konakart/appif/AddressIf.html" title="interface in com.konakart.appif">AddressIf</A>&nbsp;deliveryAddress)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The current delivery address is substituted with the new one.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#changeOrderStatus(int, int, boolean, java.lang.String)">changeOrderStatus</A></B>(int&nbsp;orderId,
                  int&nbsp;status,
                  boolean&nbsp;customerNotified,
                  java.lang.String&nbsp;comments)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The state of the current order id changed and an orders_status_history record is added to the
 order to keep track of the change.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#changeOrderStatus(java.lang.String, int, int, boolean, java.lang.String)">changeOrderStatus</A></B>(java.lang.String&nbsp;sessionId,
                  int&nbsp;orderId,
                  int&nbsp;status,
                  boolean&nbsp;customerNotified,
                  java.lang.String&nbsp;comments)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The state of the current order id changed and an orders_status_history record is added to the
 order to keep track of the change.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#createAndSaveOrder(java.lang.String, java.lang.String, com.konakart.appif.CustomerRegistrationIf, com.konakart.appif.BasketIf[], java.lang.String, java.lang.String, int)">createAndSaveOrder</A></B>(java.lang.String&nbsp;emailAddr,
                   java.lang.String&nbsp;password,
                   <A HREF="../../../com/konakart/appif/CustomerRegistrationIf.html" title="interface in com.konakart.appif">CustomerRegistrationIf</A>&nbsp;custReg,
                   <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
                   java.lang.String&nbsp;shippingModule,
                   java.lang.String&nbsp;paymentModule,
                   int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#createOrder(java.lang.String, com.konakart.appif.BasketIf[], int)">createOrder</A></B>(java.lang.String&nbsp;sessionId,
            <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
            int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An order object is returned with all addresses populated with the default address of the
 customer referenced by the session Id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#createOrderWithOptions(java.lang.String, com.konakart.appif.BasketIf[], com.konakart.appif.CreateOrderOptionsIf, int)">createOrderWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                       <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
                       <A HREF="../../../com/konakart/appif/CreateOrderOptionsIf.html" title="interface in com.konakart.appif">CreateOrderOptionsIf</A>&nbsp;options,
                       int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An order object is returned with all addresses populated with the default address of the
 customer referenced by the session Id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#deleteOrderIdForSecretKey(java.lang.String)">deleteOrderIdForSecretKey</A></B>(java.lang.String&nbsp;secretKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The order id stored in the database and indexed by the secretKey, is deleted</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/OrderStatus.html" title="class in com.konakart.app">OrderStatus</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getAllOrderStatuses(int)">getAllOrderStatuses</A></B>(int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns an array of Order Status objects for a given language</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/IpnHistory.html" title="class in com.konakart.app">IpnHistory</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getIpnHistory(int)">getIpnHistory</A></B>(int&nbsp;orderId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve an array of IpnHistory objects for an order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/IpnHistory.html" title="class in com.konakart.app">IpnHistory</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getIpnHistory(java.lang.String, int)">getIpnHistory</A></B>(java.lang.String&nbsp;sessionId,
              int&nbsp;orderId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve an array of IpnHistory objects for an order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getOrder(java.lang.String, int, int)">getOrder</A></B>(java.lang.String&nbsp;sessionId,
         int&nbsp;orderId,
         int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve an order for the customer referenced by the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getOrderForOrderId(int, int)">getOrderForOrderId</A></B>(int&nbsp;orderId,
                   int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve an order for an orderId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getOrderIdFromSecretKey(java.lang.String)">getOrderIdFromSecretKey</A></B>(java.lang.String&nbsp;secretKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The order id stored in the database and indexed by the secretKey, is returned</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getOrdersPerCustomer(com.konakart.appif.DataDescriptorIf, java.lang.String, int)">getOrdersPerCustomer</A></B>(<A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                     java.lang.String&nbsp;sessionId,
                     int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve a number of orders for the customer referenced by the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getOrderStatus(java.lang.String, int)">getOrderStatus</A></B>(java.lang.String&nbsp;sessionId,
               int&nbsp;orderId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the order status for an order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getSecretKeyForOrderId(int)">getSecretKeyForOrderId</A></B>(int&nbsp;orderId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Every time we send a notification to a payment gateway, we get a new secret key for the
 order, which is sent back to us in the reply.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getStatusText(int, int)">getStatusText</A></B>(int&nbsp;statusId,
              int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the text of a status from the orders_status table</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/TaxRate.html" title="class in com.konakart.app">TaxRate</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#getTaxRateObjectsPerOrder(com.konakart.app.Order)">getTaxRateObjectsPerOrder</A></B>(<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of TaxRate objects used by this order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#refreshConfigs()">refreshConfigs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Refresh the configuration of the order manager</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#saveIpnHistory(java.lang.String, com.konakart.appif.IpnHistoryIf)">saveIpnHistory</A></B>(java.lang.String&nbsp;sessionId,
               <A HREF="../../../com/konakart/appif/IpnHistoryIf.html" title="interface in com.konakart.appif">IpnHistoryIf</A>&nbsp;ipnHistory)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The IpnHistory object is saved in the database.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#saveOrder(java.lang.String, com.konakart.appif.OrderIf, int)">saveOrder</A></B>(java.lang.String&nbsp;sessionId,
          <A HREF="../../../com/konakart/appif/OrderIf.html" title="interface in com.konakart.appif">OrderIf</A>&nbsp;order,
          int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A new order is created in the DB.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#searchForOrdersPerCustomer(int, com.konakart.appif.DataDescriptorIf, com.konakart.appif.OrderSearchIf, int)">searchForOrdersPerCustomer</A></B>(int&nbsp;customerId,
                           <A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                           <A HREF="../../../com/konakart/appif/OrderSearchIf.html" title="interface in com.konakart.appif">OrderSearchIf</A>&nbsp;orderSearch,
                           int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return orders matching the search criteria.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#searchForOrdersPerCustomer(java.lang.String, com.konakart.appif.DataDescriptorIf, com.konakart.appif.OrderSearchIf, int)">searchForOrdersPerCustomer</A></B>(java.lang.String&nbsp;sessionId,
                           <A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                           <A HREF="../../../com/konakart/appif/OrderSearchIf.html" title="interface in com.konakart.appif">OrderSearchIf</A>&nbsp;orderSearch,
                           int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return orders matching the search criteria.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#setCreditCardDetailsOnOrder(java.lang.String, int, com.konakart.appif.CreditCardIf)">setCreditCardDetailsOnOrder</A></B>(java.lang.String&nbsp;sessionId,
                            int&nbsp;orderId,
                            <A HREF="../../../com/konakart/appif/CreditCardIf.html" title="interface in com.konakart.appif">CreditCardIf</A>&nbsp;card)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The credit card details in the CreditCard object passed in as a parameter, are saved in the
 database for an existing order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#setRewardPointReservationId(int, int, int)">setRewardPointReservationId</A></B>(int&nbsp;customerId,
                            int&nbsp;orderId,
                            int&nbsp;reservationId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Verifies that the order belongs to the customer identified by the <code>customerId</code>
 parameter and then updates the reservation id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#setRewardPointReservationId(java.lang.String, int, int)">setRewardPointReservationId</A></B>(java.lang.String&nbsp;sessionId,
                            int&nbsp;orderId,
                            int&nbsp;reservationId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Verifies that the order belongs to the customer identified by the <code>sessionId</code>
 parameter and then updates the reservation id.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#updateInventory(java.lang.String, int)">updateInventory</A></B>(java.lang.String&nbsp;sessionId,
                int&nbsp;orderId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the STOCK_LIMITED configuration variable is set to true, we subtract the products in stock
 by the product orders.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#updateInventoryWithOptions(java.lang.String, int, com.konakart.appif.CreateOrderOptionsIf)">updateInventoryWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                           int&nbsp;orderId,
                           <A HREF="../../../com/konakart/appif/CreateOrderOptionsIf.html" title="interface in com.konakart.appif">CreateOrderOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the STOCK_LIMITED configuration variable is set to true, we subtract the products in stock
 by the product orders.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#updateOrder(int, int, boolean, java.lang.String, com.konakart.appif.OrderUpdateIf)">updateOrder</A></B>(int&nbsp;orderId,
            int&nbsp;status,
            boolean&nbsp;customerNotified,
            java.lang.String&nbsp;comments,
            <A HREF="../../../com/konakart/appif/OrderUpdateIf.html" title="interface in com.konakart.appif">OrderUpdateIf</A>&nbsp;updateOrder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The state of the order referenced by the orderId parameter is changed, and an
 orders_status_history record is added to the order to keep track of the change.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/blif/OrderMgrIf.html#updateOrder(java.lang.String, int, int, boolean, java.lang.String, com.konakart.appif.OrderUpdateIf)">updateOrder</A></B>(java.lang.String&nbsp;sessionId,
            int&nbsp;orderId,
            int&nbsp;status,
            boolean&nbsp;customerNotified,
            java.lang.String&nbsp;comments,
            <A HREF="../../../com/konakart/appif/OrderUpdateIf.html" title="interface in com.konakart.appif">OrderUpdateIf</A>&nbsp;updateOrder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The state of the order referenced by the orderId parameter is changed, and an
 orders_status_history record is added to the order to keep track of the change.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="saveOrder(java.lang.String, com.konakart.appif.OrderIf, int)"><!-- --></A><H3>
saveOrder</H3>
<PRE>
int <B>saveOrder</B>(java.lang.String&nbsp;sessionId,
              <A HREF="../../../com/konakart/appif/OrderIf.html" title="interface in com.konakart.appif">OrderIf</A>&nbsp;order,
              int&nbsp;languageId)
              throws java.lang.Exception</PRE>
<DL>
<DD>A new order is created in the DB. The Order object parameter should have all addresses
 populated (customer, billing and delivery). The status of the newly created order is taken
 from th eorder itself. A check is made to determine whether the status exists within the
 orders_status table. To save an order we have to write into a few DB tables: orders,
 orders_products, orders_products_attributes, orders_total, orders_status_history.
 
 We do this in a single transaction.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>order</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>The id of the new order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createOrder(java.lang.String, com.konakart.appif.BasketIf[], int)"><!-- --></A><H3>
createOrder</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>createOrder</B>(java.lang.String&nbsp;sessionId,
                  <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
                  int&nbsp;languageId)
                  throws java.lang.Exception</PRE>
<DL>
<DD>An order object is returned with all addresses populated with the default address of the
 customer referenced by the session Id. The products being ordered are retrieved from the
 basketItemArray. The returned object has not been saved in the DB.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>basketItemArray</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Order object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createOrderWithOptions(java.lang.String, com.konakart.appif.BasketIf[], com.konakart.appif.CreateOrderOptionsIf, int)"><!-- --></A><H3>
createOrderWithOptions</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>createOrderWithOptions</B>(java.lang.String&nbsp;sessionId,
                             <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
                             <A HREF="../../../com/konakart/appif/CreateOrderOptionsIf.html" title="interface in com.konakart.appif">CreateOrderOptionsIf</A>&nbsp;options,
                             int&nbsp;languageId)
                             throws java.lang.Exception</PRE>
<DL>
<DD>An order object is returned with all addresses populated with the default address of the
 customer referenced by the session Id. The products being ordered are retrieved from the
 basketItemArray. The returned object has not been saved in the DB.<br>
 If the options parameter is set to null, the functionality is identical to createOrder(),
 otherwise the option parameters are used to determine the additional functionality.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>basketItemArray</CODE> - <DD><CODE>options</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Order object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="changeDeliveryAddress(java.lang.String, com.konakart.appif.OrderIf, com.konakart.appif.AddressIf)"><!-- --></A><H3>
changeDeliveryAddress</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>changeDeliveryAddress</B>(java.lang.String&nbsp;sessionId,
                            <A HREF="../../../com/konakart/appif/OrderIf.html" title="interface in com.konakart.appif">OrderIf</A>&nbsp;order,
                            <A HREF="../../../com/konakart/appif/AddressIf.html" title="interface in com.konakart.appif">AddressIf</A>&nbsp;deliveryAddress)
                            throws java.lang.Exception</PRE>
<DL>
<DD>The current delivery address is substituted with the new one. If the country and zone have
 changed, then we need to work out the new tax for the order products
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>order</CODE> - <DD><CODE>deliveryAddress</CODE> - 
<DT><B>Returns:</B><DD>New Order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getTaxRateObjectsPerOrder(com.konakart.app.Order)"><!-- --></A><H3>
getTaxRateObjectsPerOrder</H3>
<PRE>
<A HREF="../../../com/konakart/app/TaxRate.html" title="class in com.konakart.app">TaxRate</A>[] <B>getTaxRateObjectsPerOrder</B>(<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A>&nbsp;order)
                                    throws java.lang.Exception</PRE>
<DL>
<DD>Returns a list of TaxRate objects used by this order. A tax rate object is added to the list
 if it is used to add tax to a product or to the shipping.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>order</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of TaxRate objects used by this order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOrdersPerCustomer(com.konakart.appif.DataDescriptorIf, java.lang.String, int)"><!-- --></A><H3>
getOrdersPerCustomer</H3>
<PRE>
<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A> <B>getOrdersPerCustomer</B>(<A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                            java.lang.String&nbsp;sessionId,
                            int&nbsp;languageId)
                            throws java.lang.Exception</PRE>
<DL>
<DD>Retrieve a number of orders for the customer referenced by the sessionId. The orders are
 always returned sorted by date (most recent orders first). The DataDescriptor is used to
 retrieve offset and limit information. If null, the offset defaults to 0 and a default limit
 is used.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dataDesc</CODE> - <DD><CODE>sessionId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>An Orders object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOrder(java.lang.String, int, int)"><!-- --></A><H3>
getOrder</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>getOrder</B>(java.lang.String&nbsp;sessionId,
               int&nbsp;orderId,
               int&nbsp;languageId)
               throws java.lang.Exception</PRE>
<DL>
<DD>Retrieve an order for the customer referenced by the sessionId.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>An Order object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOrderForOrderId(int, int)"><!-- --></A><H3>
getOrderForOrderId</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>getOrderForOrderId</B>(int&nbsp;orderId,
                         int&nbsp;languageId)
                         throws java.lang.Exception</PRE>
<DL>
<DD>Retrieve an order for an orderId.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>An Order object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getStatusText(int, int)"><!-- --></A><H3>
getStatusText</H3>
<PRE>
java.lang.String <B>getStatusText</B>(int&nbsp;statusId,
                               int&nbsp;languageId)
                               throws java.lang.Exception</PRE>
<DL>
<DD>Returns the text of a status from the orders_status table
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>statusId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns the text of the status. Null if not found.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateOrder(java.lang.String, int, int, boolean, java.lang.String, com.konakart.appif.OrderUpdateIf)"><!-- --></A><H3>
updateOrder</H3>
<PRE>
void <B>updateOrder</B>(java.lang.String&nbsp;sessionId,
                 int&nbsp;orderId,
                 int&nbsp;status,
                 boolean&nbsp;customerNotified,
                 java.lang.String&nbsp;comments,
                 <A HREF="../../../com/konakart/appif/OrderUpdateIf.html" title="interface in com.konakart.appif">OrderUpdateIf</A>&nbsp;updateOrder)
                 throws java.lang.Exception</PRE>
<DL>
<DD>The state of the order referenced by the orderId parameter is changed, and an
 orders_status_history record is added to the order to keep track of the change.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - The session id of the logged in user<DD><CODE>orderId</CODE> - The numeric id of the order<DD><CODE>status</CODE> - The new numeric state of the order. Valid states are defined in the database.<DD><CODE>customerNotified</CODE> - If you send an eMail to the customer to notify him of the state change then set
            this to true to register the fact that an eMail has been sent<DD><CODE>comments</CODE> - These comments are written into the orders_status_history record<DD><CODE>updateOrder</CODE> - contains order update data such as who updated the order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateOrder(int, int, boolean, java.lang.String, com.konakart.appif.OrderUpdateIf)"><!-- --></A><H3>
updateOrder</H3>
<PRE>
void <B>updateOrder</B>(int&nbsp;orderId,
                 int&nbsp;status,
                 boolean&nbsp;customerNotified,
                 java.lang.String&nbsp;comments,
                 <A HREF="../../../com/konakart/appif/OrderUpdateIf.html" title="interface in com.konakart.appif">OrderUpdateIf</A>&nbsp;updateOrder)
                 throws java.lang.Exception</PRE>
<DL>
<DD>The state of the order referenced by the orderId parameter is changed, and an
 orders_status_history record is added to the order to keep track of the change.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderId</CODE> - The numeric id of the order<DD><CODE>status</CODE> - The new numeric state of the order. Valid states are defined in the database.<DD><CODE>customerNotified</CODE> - If you send an eMail to the customer to notify him of the state change then set
            this to true to register the fact that an eMail has been sent<DD><CODE>comments</CODE> - These comments are written into the orders_status_history record<DD><CODE>updateOrder</CODE> - contains order update data such as who updated the order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="changeOrderStatus(java.lang.String, int, int, boolean, java.lang.String)"><!-- --></A><H3>
changeOrderStatus</H3>
<PRE>
void <B>changeOrderStatus</B>(java.lang.String&nbsp;sessionId,
                       int&nbsp;orderId,
                       int&nbsp;status,
                       boolean&nbsp;customerNotified,
                       java.lang.String&nbsp;comments)
                       throws java.lang.Exception</PRE>
<DL>
<DD>The state of the current order id changed and an orders_status_history record is added to the
 order to keep track of the change.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>status</CODE> - <DD><CODE>customerNotified</CODE> - Has the customer been notified<DD><CODE>comments</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="changeOrderStatus(int, int, boolean, java.lang.String)"><!-- --></A><H3>
changeOrderStatus</H3>
<PRE>
void <B>changeOrderStatus</B>(int&nbsp;orderId,
                       int&nbsp;status,
                       boolean&nbsp;customerNotified,
                       java.lang.String&nbsp;comments)
                       throws java.lang.Exception</PRE>
<DL>
<DD>The state of the current order id changed and an orders_status_history record is added to the
 order to keep track of the change.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderId</CODE> - <DD><CODE>status</CODE> - <DD><CODE>customerNotified</CODE> - Has the customer been notified<DD><CODE>comments</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateInventory(java.lang.String, int)"><!-- --></A><H3>
updateInventory</H3>
<PRE>
void <B>updateInventory</B>(java.lang.String&nbsp;sessionId,
                     int&nbsp;orderId)
                     throws java.lang.Exception</PRE>
<DL>
<DD>If the STOCK_LIMITED configuration variable is set to true, we subtract the products in stock
 by the product orders. If we hit the STOCK_REORDER_LEVEL, then we instantiate a class defined
 by the STOCK_REORDER_CLASS and call it. If STOCK_ALLOW_CHECKOUT is set to true, when we hit
 zero items in stock we don't touch the status, otherwise we disable the product when the
 quantity reaches zero by setting the status to zero.
 
 In this method we also update any promotion data such as the number of times a coupon has
 been used or the number of times a customer has used a promotion.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateInventoryWithOptions(java.lang.String, int, com.konakart.appif.CreateOrderOptionsIf)"><!-- --></A><H3>
updateInventoryWithOptions</H3>
<PRE>
void <B>updateInventoryWithOptions</B>(java.lang.String&nbsp;sessionId,
                                int&nbsp;orderId,
                                <A HREF="../../../com/konakart/appif/CreateOrderOptionsIf.html" title="interface in com.konakart.appif">CreateOrderOptionsIf</A>&nbsp;options)
                                throws java.lang.Exception</PRE>
<DL>
<DD>If the STOCK_LIMITED configuration variable is set to true, we subtract the products in stock
 by the product orders. If we hit the STOCK_REORDER_LEVEL, then we instantiate a class defined
 by the STOCK_REORDER_CLASS and call it. If STOCK_ALLOW_CHECKOUT is set to true, when we hit
 zero items in stock we don't touch the status, otherwise we disable the product when the
 quantity reaches zero by setting the status to zero.
 
 In this method we also update any promotion data such as the number of times a coupon has
 been used or the number of times a customer has used a promotion.
 
 If the options parameter is set to null, the functionality is identical to updateInventory(),
 otherwise the option parameters are used to determine the additional functionality.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getSecretKeyForOrderId(int)"><!-- --></A><H3>
getSecretKeyForOrderId</H3>
<PRE>
java.lang.String <B>getSecretKeyForOrderId</B>(int&nbsp;orderId)
                                        throws java.lang.Exception</PRE>
<DL>
<DD>Every time we send a notification to a payment gateway, we get a new secret key for the
 order, which is sent back to us in the reply. We use the secret key to look up the order.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderId</CODE> - 
<DT><B>Returns:</B><DD>Returns the secret key
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOrderIdFromSecretKey(java.lang.String)"><!-- --></A><H3>
getOrderIdFromSecretKey</H3>
<PRE>
int <B>getOrderIdFromSecretKey</B>(java.lang.String&nbsp;secretKey)
                            throws com.workingdogs.village.DataSetException,
                                   org.apache.torque.TorqueException</PRE>
<DL>
<DD>The order id stored in the database and indexed by the secretKey, is returned
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>secretKey</CODE> - 
<DT><B>Returns:</B><DD>The order Id that was stored in the database. A negative number is returned if no
         orderId can be found.
<DT><B>Throws:</B>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE>org.apache.torque.TorqueException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="deleteOrderIdForSecretKey(java.lang.String)"><!-- --></A><H3>
deleteOrderIdForSecretKey</H3>
<PRE>
void <B>deleteOrderIdForSecretKey</B>(java.lang.String&nbsp;secretKey)
                               throws org.apache.torque.TorqueException</PRE>
<DL>
<DD>The order id stored in the database and indexed by the secretKey, is deleted
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>secretKey</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>org.apache.torque.TorqueException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="saveIpnHistory(java.lang.String, com.konakart.appif.IpnHistoryIf)"><!-- --></A><H3>
saveIpnHistory</H3>
<PRE>
int <B>saveIpnHistory</B>(java.lang.String&nbsp;sessionId,
                   <A HREF="../../../com/konakart/appif/IpnHistoryIf.html" title="interface in com.konakart.appif">IpnHistoryIf</A>&nbsp;ipnHistory)
                   throws java.lang.Exception</PRE>
<DL>
<DD>The IpnHistory object is saved in the database.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>ipnHistory</CODE> - 
<DT><B>Returns:</B><DD>Id of newly created object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createAndSaveOrder(java.lang.String, java.lang.String, com.konakart.appif.CustomerRegistrationIf, com.konakart.appif.BasketIf[], java.lang.String, java.lang.String, int)"><!-- --></A><H3>
createAndSaveOrder</H3>
<PRE>
<A HREF="../../../com/konakart/app/Order.html" title="class in com.konakart.app">Order</A> <B>createAndSaveOrder</B>(java.lang.String&nbsp;emailAddr,
                         java.lang.String&nbsp;password,
                         <A HREF="../../../com/konakart/appif/CustomerRegistrationIf.html" title="interface in com.konakart.appif">CustomerRegistrationIf</A>&nbsp;custReg,
                         <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItemArray,
                         java.lang.String&nbsp;shippingModule,
                         java.lang.String&nbsp;paymentModule,
                         int&nbsp;languageId)
                         throws java.lang.Exception</PRE>
<DL>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>emailAddr</CODE> - <DD><CODE>password</CODE> - <DD><CODE>custReg</CODE> - <DD><CODE>basketItemArray</CODE> - <DD><CODE>shippingModule</CODE> - <DD><CODE>paymentModule</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns an Order object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setCreditCardDetailsOnOrder(java.lang.String, int, com.konakart.appif.CreditCardIf)"><!-- --></A><H3>
setCreditCardDetailsOnOrder</H3>
<PRE>
void <B>setCreditCardDetailsOnOrder</B>(java.lang.String&nbsp;sessionId,
                                 int&nbsp;orderId,
                                 <A HREF="../../../com/konakart/appif/CreditCardIf.html" title="interface in com.konakart.appif">CreditCardIf</A>&nbsp;card)
                                 throws java.lang.Exception</PRE>
<DL>
<DD>The credit card details in the CreditCard object passed in as a parameter, are saved in the
 database for an existing order. Before being saved, this sensitive information is encrypted.<br>
 No update or insert is done for attributes of the CreditCard object that are set to null. The
 credit card details are mapped as follows to attributes in the order object:
 <ul>
 <li>e1 - Credit Card owner</li>
 <li>e2 - Credit Card number</li>
 <li>e3 - Credit Card expiration</li>
 <li>e4 - Credit Card CVV</li>
 <li>e5 - Credit Card Type</li>
 </ul>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>card</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setRewardPointReservationId(java.lang.String, int, int)"><!-- --></A><H3>
setRewardPointReservationId</H3>
<PRE>
void <B>setRewardPointReservationId</B>(java.lang.String&nbsp;sessionId,
                                 int&nbsp;orderId,
                                 int&nbsp;reservationId)
                                 throws java.lang.Exception</PRE>
<DL>
<DD>Verifies that the order belongs to the customer identified by the <code>sessionId</code>
 parameter and then updates the reservation id.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>reservationId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setRewardPointReservationId(int, int, int)"><!-- --></A><H3>
setRewardPointReservationId</H3>
<PRE>
void <B>setRewardPointReservationId</B>(int&nbsp;customerId,
                                 int&nbsp;orderId,
                                 int&nbsp;reservationId)
                                 throws java.lang.Exception</PRE>
<DL>
<DD>Verifies that the order belongs to the customer identified by the <code>customerId</code>
 parameter and then updates the reservation id.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>orderId</CODE> - <DD><CODE>reservationId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getIpnHistory(int)"><!-- --></A><H3>
getIpnHistory</H3>
<PRE>
<A HREF="../../../com/konakart/app/IpnHistory.html" title="class in com.konakart.app">IpnHistory</A>[] <B>getIpnHistory</B>(int&nbsp;orderId)
                           throws com.workingdogs.village.DataSetException,
                                  org.apache.torque.TorqueException</PRE>
<DL>
<DD>Retrieve an array of IpnHistory objects for an order.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>orderId</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of IpnHistory objects for the order
<DT><B>Throws:</B>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE>org.apache.torque.TorqueException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getIpnHistory(java.lang.String, int)"><!-- --></A><H3>
getIpnHistory</H3>
<PRE>
<A HREF="../../../com/konakart/app/IpnHistory.html" title="class in com.konakart.app">IpnHistory</A>[] <B>getIpnHistory</B>(java.lang.String&nbsp;sessionId,
                           int&nbsp;orderId)
                           throws java.lang.Exception</PRE>
<DL>
<DD>Retrieve an array of IpnHistory objects for an order. The order must belong to the customer
 referenced by the sessionId.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - The session id of the logged in user<DD><CODE>orderId</CODE> - The numeric id of the order
<DT><B>Returns:</B><DD>Returns an array of IpnHistory objects for the order
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOrderStatus(java.lang.String, int)"><!-- --></A><H3>
getOrderStatus</H3>
<PRE>
int <B>getOrderStatus</B>(java.lang.String&nbsp;sessionId,
                   int&nbsp;orderId)
                   throws java.lang.Exception</PRE>
<DL>
<DD>Get the order status for an order.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - The session id of the logged in user<DD><CODE>orderId</CODE> - The numeric id of the order
<DT><B>Returns:</B><DD>Returns the order status. Returns -1 if the order doesn't exist.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="searchForOrdersPerCustomer(java.lang.String, com.konakart.appif.DataDescriptorIf, com.konakart.appif.OrderSearchIf, int)"><!-- --></A><H3>
searchForOrdersPerCustomer</H3>
<PRE>
<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A> <B>searchForOrdersPerCustomer</B>(java.lang.String&nbsp;sessionId,
                                  <A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                                  <A HREF="../../../com/konakart/appif/OrderSearchIf.html" title="interface in com.konakart.appif">OrderSearchIf</A>&nbsp;orderSearch,
                                  int&nbsp;languageId)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>Return orders matching the search criteria.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - Valid session id of a logged in customer<DD><CODE>dataDesc</CODE> - <DD><CODE>orderSearch</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>An Orders object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="searchForOrdersPerCustomer(int, com.konakart.appif.DataDescriptorIf, com.konakart.appif.OrderSearchIf, int)"><!-- --></A><H3>
searchForOrdersPerCustomer</H3>
<PRE>
<A HREF="../../../com/konakart/app/Orders.html" title="class in com.konakart.app">Orders</A> <B>searchForOrdersPerCustomer</B>(int&nbsp;customerId,
                                  <A HREF="../../../com/konakart/appif/DataDescriptorIf.html" title="interface in com.konakart.appif">DataDescriptorIf</A>&nbsp;dataDesc,
                                  <A HREF="../../../com/konakart/appif/OrderSearchIf.html" title="interface in com.konakart.appif">OrderSearchIf</A>&nbsp;orderSearch,
                                  int&nbsp;languageId)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>Return orders matching the search criteria.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>dataDesc</CODE> - <DD><CODE>orderSearch</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>An Orders object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getAllOrderStatuses(int)"><!-- --></A><H3>
getAllOrderStatuses</H3>
<PRE>
<A HREF="../../../com/konakart/app/OrderStatus.html" title="class in com.konakart.app">OrderStatus</A>[] <B>getAllOrderStatuses</B>(int&nbsp;languageId)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>Returns an array of Order Status objects for a given language
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Order Status Objects
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="refreshConfigs()"><!-- --></A><H3>
refreshConfigs</H3>
<PRE>
void <B>refreshConfigs</B>()
                    throws java.lang.Exception</PRE>
<DL>
<DD>Refresh the configuration of the order manager
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/blif/MultiStoreMgrIf.html" title="interface in com.konakart.blif"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/blif/OrderTotalMgrIf.html" title="interface in com.konakart.blif"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/blif/OrderMgrIf.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderMgrIf.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2011 DS Data Systems UK Ltd.
</BODY>
</HTML>

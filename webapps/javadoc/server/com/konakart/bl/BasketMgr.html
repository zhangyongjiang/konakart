<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Wed Aug 27 11:46:10 BST 2014 -->
<TITLE>
BasketMgr (KonaKart Server Engine API Documentation)
</TITLE>

<META NAME="date" CONTENT="2014-08-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BasketMgr (KonaKart Server Engine API Documentation)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/bl/BasketMgr.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BasketMgr.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.konakart.bl</FONT>
<BR>
Class BasketMgr</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">com.konakart.bl.BaseMgr</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.konakart.bl.BasketMgr</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>BasketMgr</B><DT>extends <A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</A><DT>implements <A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></DL>
</PRE>

<P>
Manages all business logic relevant to the management of the shopping cart within the system
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl">BasketMgr.OptionSortOrderComparator</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to sort the Option objects based on option id</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;org.apache.commons.logging.Log</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#log">log</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the log</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_com.konakart.bl.BaseMgr"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class com.konakart.bl.<A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../com/konakart/bl/BaseMgr.html#templateBaseDir">templateBaseDir</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#BasketMgr(com.konakart.appif.KKEngIf)">BasketMgr</A></B>(<A HREF="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</A>&nbsp;eng)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#addToBasket(int, com.konakart.app.Basket, com.konakart.appif.AddToBasketOptionsIf)">addToBasket</A></B>(int&nbsp;customerId,
            <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
            <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We must take the information passed into the method and create a customers_basket record as
 well as one or more customers_basket_attributes records.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)">addToBasket</A></B>(java.lang.String&nbsp;sessionId,
            int&nbsp;customerId,
            <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determines the customerId to use and calls the protected method with the customerId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">addToBasketWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                       <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If options is set to null, this method is identical to addToBasket().</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#checkBasketBelongsToCustomer(int, int)">checkBasketBelongsToCustomer</A></B>(int&nbsp;customerId,
                             int&nbsp;basketId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Throws an exception if the basket item doesn't belong to the customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#checkBasketOptions(com.konakart.app.Basket)">checkBasketOptions</A></B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;b)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We may have the case where the basket object has an array of options that only have the id
 and value id set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#createEncodedProduct(int, com.konakart.appif.OptionIf[])">createEncodedProduct</A></B>(int&nbsp;productId,
                     <A HREF="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</A>[]&nbsp;opts)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#createFetchProductOptions(com.konakart.appif.AddToBasketOptionsIf)">createFetchProductOptions</A></B>(<A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a FetchProductOptions object from an AddToBasketOptions</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)">findOptionInProduct</A></B>(<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>&nbsp;p,
                    <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>&nbsp;o)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The basket object must have a populated product object with options.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getBasket(int)">getBasket</A></B>(int&nbsp;basketId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to get a basket object using the primary key</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomer(java.lang.String, int, int)">getBasketItemsPerCustomer</A></B>(java.lang.String&nbsp;sessionId,
                          int&nbsp;customerId,
                          int&nbsp;languageId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the basket items for a customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomerWithOptions(int, com.konakart.app.Address, int, com.konakart.appif.AddToBasketOptionsIf)">getBasketItemsPerCustomerWithOptions</A></B>(int&nbsp;customerId,
                                     <A HREF="../../../com/konakart/app/Address.html" title="class in com.konakart.app">Address</A>&nbsp;custAddr,
                                     int&nbsp;languageId,
                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the basket items for a customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)">getBasketItemsPerCustomerWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                                     int&nbsp;customerId,
                                     int&nbsp;languageId,
                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the basket items for a customer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getBasketItemsPerEncodedProductAndCustomer(int, java.lang.String)">getBasketItemsPerEncodedProductAndCustomer</A></B>(int&nbsp;customerId,
                                           java.lang.String&nbsp;encodedProduct)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is used to see if a product that we are adding to the basket already exists in it.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getCustomerId(java.lang.String, int)">getCustomerId</A></B>(java.lang.String&nbsp;sessionId,
              int&nbsp;customerId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the sessionId is null, we check the customerId to ensure that it is negative.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#getOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">getOptsForBasketItem</A></B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                     int&nbsp;priceId,
                     int&nbsp;languageId,
                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#mergeBaskets(java.lang.String, int)">mergeBaskets</A></B>(java.lang.String&nbsp;sessionId,
             int&nbsp;customerFromId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)">mergeBasketsWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerFromId,
                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">populateOptsForBasketItem</A></B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                          int&nbsp;priceId,
                          int&nbsp;languageId,
                          <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#removeBasketItemsPerCustomer(int)">removeBasketItemsPerCustomer</A></B>(int&nbsp;customerId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We delete all basket items that exist for the customer passed in as a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#removeBasketItemsPerCustomer(java.lang.String, int)">removeBasketItemsPerCustomer</A></B>(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the protected method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#removeFromBasket(int, com.konakart.appif.BasketIf)">removeFromBasket</A></B>(int&nbsp;customerId,
                 <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We must remove the customers_basket record and any associated customers_basket_attributes
 records.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)">removeFromBasket</A></B>(java.lang.String&nbsp;sessionId,
                 int&nbsp;customerId,
                 <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We must remove the customers_basket record and any associated customers_basket_attributes
 records.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#setCriteriaWithStandardAttributes(com.konakart.db.KKCriteria)">setCriteriaWithStandardAttributes</A></B>(<A HREF="../../../com/konakart/db/KKCriteria.html" title="class in com.konakart.db">KKCriteria</A>&nbsp;c)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the criteria with the standard attributes so as not to have to repeat this code many
 times.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#updateBasket(int, com.konakart.app.Basket, com.konakart.appif.AddToBasketOptionsIf)">updateBasket</A></B>(int&nbsp;customerId,
             <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
             <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;We must update the customers_basket record.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)">updateBasket</A></B>(java.lang.String&nbsp;sessionId,
             int&nbsp;customerId,
             <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the sessionId is null, we check the customerId to ensure that it is negative.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithOptions</A></B>(java.lang.String&nbsp;sessionId,
                        int&nbsp;customerId,
                        <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the sessionId is null, we check the customerId to ensure that it is negative.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#updateBasketWithStockInfo(com.konakart.appif.BasketIf[])">updateBasketWithStockInfo</A></B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives an array of basket items and updates each one with the current stock level.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/konakart/bl/BasketMgr.html#updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithStockInfoWithOptions</A></B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems,
                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receives an array of basket items and updates each one with the current stock level.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.konakart.bl.BaseMgr"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class com.konakart.bl.<A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl">BaseMgr</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../com/konakart/bl/BaseMgr.html#addInsertAttr(org.apache.torque.util.Criteria, java.lang.String, int)">addInsertAttr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#addInsertAttr(org.apache.torque.util.Criteria, java.lang.String, java.lang.Object)">addInsertAttr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint(com.konakart.db.KKCriteria, java.lang.String, int, org.apache.torque.Column)">addStringRuleConstraint</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#addStringRuleConstraint(com.konakart.db.KKCriteria, java.lang.String, int, java.lang.String)">addStringRuleConstraint</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#checkRequired(java.lang.Object, java.lang.String, java.lang.String)">checkRequired</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#executeQuery(java.lang.String)">executeQuery</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#executeQuery(java.lang.String, int, int, java.lang.String, boolean)">executeQuery</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#executeQuery(java.lang.String, int, int, java.lang.String, boolean, boolean, java.lang.String)">executeQuery</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#executeQuery(java.lang.String, int, int, java.lang.String, boolean, boolean, java.lang.String, java.util.List)">executeQuery</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#executeQuery(java.lang.String, java.util.List)">executeQuery</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getAdminEngMgr()">getAdminEngMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getBasketMgr()">getBasketMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getBillingMgr()">getBillingMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getBookableProductMgr()">getBookableProductMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCacheMgr()">getCacheMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCatMgr()">getCatMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getConfigMgr()">getConfigMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCookieMgr()">getCookieMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCurrMgr()">getCurrMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCustMgr()">getCustMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCustomerIdFromSession(java.lang.String)">getCustomerIdFromSession</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCustomerStatsMgr()">getCustomerStatsMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getCustomerTagMgr()">getCustomerTagMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getEmailMgr()">getEmailMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getEng()">getEng</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getEventMgr()">getEventMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getKonaKartConfig(java.lang.String, boolean)">getKonaKartConfig</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getLangMgr()">getLangMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getManuMgr()">getManuMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getMiscItemMgr()">getMiscItemMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getMiscPriceMgr()">getMiscPriceMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getMode()">getMode</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getModeString()">getModeString</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getMqMgr()">getMqMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getMultiStoreMgr()">getMultiStoreMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getNewCriteria()">getNewCriteria</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getNewCriteria(boolean)">getNewCriteria</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getOrderIntegrationMgr()">getOrderIntegrationMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getOrderMgr()">getOrderMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getOrderTotalMgr()">getOrderTotalMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getPaymentMgr()">getPaymentMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getProdMgr()">getProdMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getPromMgr()">getPromMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getPunchOutMgr()">getPunchOutMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getRewardPointMgr()">getRewardPointMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getSecMgr()">getSecMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getShippingMgr()">getShippingMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getSolrMgr()">getSolrMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getStoreId()">getStoreId</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getStoreMgr()">getStoreMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getTaxMgr()">getTaxMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getTemplate(org.apache.velocity.app.VelocityEngine, java.lang.String, java.lang.String)">getTemplate</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getTemplateRoot(java.lang.String)">getTemplateRoot</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getVelocityContextMgr()">getVelocityContextMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#getWishListMgr()">getWishListMgr</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#init(com.konakart.appif.KKEngIf, org.apache.commons.logging.Log)">init</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#insertKKEvent(int, int, int)">insertKKEvent</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#insertKKEvent(int, int, java.lang.String)">insertKKEvent</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isDeadlockException(java.sql.SQLException)">isDeadlockException</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isEnterprise()">isEnterprise</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCategories()">isMultiStoreShareCategories</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareCustomers()">isMultiStoreShareCustomers</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isMultiStoreSharedDb()">isMultiStoreSharedDb</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#isMultiStoreShareProducts()">isMultiStoreShareProducts</A>, <A HREF="../../../com/konakart/bl/BaseMgr.html#manageThrowable(java.lang.Throwable)">manageThrowable</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="log"><!-- --></A><H3>
log</H3>
<PRE>
protected static org.apache.commons.logging.Log <B>log</B></PRE>
<DL>
<DD>the log
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BasketMgr(com.konakart.appif.KKEngIf)"><!-- --></A><H3>
BasketMgr</H3>
<PRE>
public <B>BasketMgr</B>(<A HREF="../../../com/konakart/appif/KKEngIf.html" title="interface in com.konakart.appif">KKEngIf</A>&nbsp;eng)
          throws java.lang.Exception</PRE>
<DL>
<DD>Constructor
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>eng</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getBasketItemsPerCustomer(java.lang.String, int, int)"><!-- --></A><H3>
getBasketItemsPerCustomer</H3>
<PRE>
public <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerCustomer</B>(java.lang.String&nbsp;sessionId,
                                          int&nbsp;customerId,
                                          int&nbsp;languageId)
                                   throws java.lang.Exception</PRE>
<DL>
<DD>Get the basket items for a customer. We determine which customerId to use and then call the
 protected method. Although we read the final_price from the db, we set it through a
 calculation since OsCommerce doesn't store this in the DB. We do store it in the DB but never
 use it directly from the DB.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomer(java.lang.String, int, int)">getBasketItemsPerCustomer</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Basket Items
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
getBasketItemsPerCustomerWithOptions</H3>
<PRE>
public <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerCustomerWithOptions</B>(java.lang.String&nbsp;sessionId,
                                                     int&nbsp;customerId,
                                                     int&nbsp;languageId,
                                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                                              throws java.lang.Exception</PRE>
<DL>
<DD>Get the basket items for a customer. We determine which customerId to use and then call the
 protected method. Although we read the final_price from the db, we set it through a
 calculation since OsCommerce doesn't store this in the DB. We do store it in the DB but never
 use it directly from the DB.
 
 If options is set to null then this call is identical to getBasketItemsPerCustomer(). The
 options may determine from where we read the price and quantity of the basket items.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#getBasketItemsPerCustomerWithOptions(java.lang.String, int, int, com.konakart.appif.AddToBasketOptionsIf)">getBasketItemsPerCustomerWithOptions</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>languageId</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Basket Items
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getBasketItemsPerCustomerWithOptions(int, com.konakart.app.Address, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
getBasketItemsPerCustomerWithOptions</H3>
<PRE>
protected <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerCustomerWithOptions</B>(int&nbsp;customerId,
                                                        <A HREF="../../../com/konakart/app/Address.html" title="class in com.konakart.app">Address</A>&nbsp;custAddr,
                                                        int&nbsp;languageId,
                                                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                                                 throws java.lang.Exception</PRE>
<DL>
<DD>Get the basket items for a customer. Although we read the final_price from the db, we set it
 through a calculation since OsCommerce doesn't store this in the DB. We do store it in the DB
 but never use it directly from the DB. This makes sense since the basket is persisted and the
 price of a product may change during the life of the basket.
 
 If we are passed an address, then we use that address for calculating tax. Otherwise we get
 the address from the customerId. If the customer id < 0, then we use the store location for
 calculating tax because this means that the customer hasn't logged in yet.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>custAddr</CODE> - <DD><CODE>languageId</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of Basket Items
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
addToBasketWithOptions</H3>
<PRE>
public int <B>addToBasketWithOptions</B>(java.lang.String&nbsp;sessionId,
                                  int&nbsp;customerId,
                                  <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                                  <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                           throws java.lang.Exception</PRE>
<DL>
<DD>If options is set to null, this method is identical to addToBasket(). Otherwise the
 functionality differs depending on the combination of options set.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#addToBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">addToBasketWithOptions</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the newly created Basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
addToBasket</H3>
<PRE>
public int <B>addToBasket</B>(java.lang.String&nbsp;sessionId,
                       int&nbsp;customerId,
                       <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                throws java.lang.Exception</PRE>
<DL>
<DD>Determines the customerId to use and calls the protected method with the customerId.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#addToBasket(java.lang.String, int, com.konakart.appif.BasketIf)">addToBasket</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the newly created Basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="addToBasket(int, com.konakart.app.Basket, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
addToBasket</H3>
<PRE>
protected int <B>addToBasket</B>(int&nbsp;customerId,
                          <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                          <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                   throws java.lang.Exception</PRE>
<DL>
<DD>We must take the information passed into the method and create a customers_basket record as
 well as one or more customers_basket_attributes records. The inserts are done in a
 transaction.
 
 Depending on how the options are set, if the item already exists with the same options etc,
 then we just increase the quantity of the existing item.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns the id of the newly created Basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getBasketItemsPerEncodedProductAndCustomer(int, java.lang.String)"><!-- --></A><H3>
getBasketItemsPerEncodedProductAndCustomer</H3>
<PRE>
protected <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>getBasketItemsPerEncodedProductAndCustomer</B>(int&nbsp;customerId,
                                                              java.lang.String&nbsp;encodedProduct)
                                                       throws org.apache.torque.TorqueException,
                                                              com.workingdogs.village.DataSetException</PRE>
<DL>
<DD>This is used to see if a product that we are adding to the basket already exists in it.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>encodedProduct</CODE> - 
<DT><B>Returns:</B><DD>Basket Object
<DT><B>Throws:</B>
<DD><CODE>org.apache.torque.TorqueException</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="checkBasketOptions(com.konakart.app.Basket)"><!-- --></A><H3>
checkBasketOptions</H3>
<PRE>
protected void <B>checkBasketOptions</B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;b)
                           throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></PRE>
<DL>
<DD>We may have the case where the basket object has an array of options that only have the id
 and value id set. If this is the case we need to populate them with the price so that the
 total can be calculated. Any option that is attached to the basket, should also be present in
 the product, so here we get the fully populated option from the product and attach it to the
 basket. If it isn't present in the product we throw an exception.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>b</CODE> - 
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)"><!-- --></A><H3>
findOptionInProduct</H3>
<PRE>
public <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A> <B>findOptionInProduct</B>(<A HREF="../../../com/konakart/appif/ProductIf.html" title="interface in com.konakart.appif">ProductIf</A>&nbsp;p,
                                  <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>&nbsp;o)
                           throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></PRE>
<DL>
<DD>The basket object must have a populated product object with options. The option passed in as
 a parameter is only partially populated so we try to find it in the array of options of the
 product and return the fully populated one.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#findOptionInProduct(com.konakart.appif.ProductIf, com.konakart.app.Option)">findOptionInProduct</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>p</CODE> - <DD><CODE>o</CODE> - 
<DT><B>Returns:</B><DD>Option
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
updateBasket</H3>
<PRE>
public void <B>updateBasket</B>(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerId,
                         <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                  throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                         com.workingdogs.village.DataSetException,
                         java.lang.Exception</PRE>
<DL>
<DD>If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 Then we call the protected method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasket(java.lang.String, int, com.konakart.appif.BasketIf)">updateBasket</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
updateBasketWithOptions</H3>
<PRE>
public void <B>updateBasketWithOptions</B>(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerId,
                                    <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item,
                                    <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                             throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                                    com.workingdogs.village.DataSetException,
                                    java.lang.Exception</PRE>
<DL>
<DD>If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and that it points to the customerId passed in as a parameter.
 
 Then we call the protected method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithOptions(java.lang.String, int, com.konakart.appif.BasketIf, com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithOptions</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasket(int, com.konakart.app.Basket, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
updateBasket</H3>
<PRE>
protected void <B>updateBasket</B>(int&nbsp;customerId,
                            <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                            <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                     throws <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A>,
                            com.workingdogs.village.DataSetException,
                            java.lang.Exception</PRE>
<DL>
<DD>We must update the customers_basket record. Normally used to change the quantity. The final
 price is recalculated and saved. We never use the price from the db (we always recalculate
 it) since OsCommerce doesn't set it so we have to be compatible.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE>
<DD><CODE>com.workingdogs.village.DataSetException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeBasketItemsPerCustomer(java.lang.String, int)"><!-- --></A><H3>
removeBasketItemsPerCustomer</H3>
<PRE>
public void <B>removeBasketItemsPerCustomer</B>(java.lang.String&nbsp;sessionId,
                                         int&nbsp;customerId)
                                  throws java.lang.Exception</PRE>
<DL>
<DD>We determine which customerId to use and then delete all basket items that exist for this
 customer by calling the protected method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#removeBasketItemsPerCustomer(java.lang.String, int)">removeBasketItemsPerCustomer</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeBasketItemsPerCustomer(int)"><!-- --></A><H3>
removeBasketItemsPerCustomer</H3>
<PRE>
protected void <B>removeBasketItemsPerCustomer</B>(int&nbsp;customerId)
                                     throws java.lang.Exception</PRE>
<DL>
<DD>We delete all basket items that exist for the customer passed in as a parameter.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
removeFromBasket</H3>
<PRE>
public void <B>removeFromBasket</B>(java.lang.String&nbsp;sessionId,
                             int&nbsp;customerId,
                             <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                      throws java.lang.Exception</PRE>
<DL>
<DD>We must remove the customers_basket record and any associated customers_basket_attributes
 records.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#removeFromBasket(java.lang.String, int, com.konakart.appif.BasketIf)">removeFromBasket</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="removeFromBasket(int, com.konakart.appif.BasketIf)"><!-- --></A><H3>
removeFromBasket</H3>
<PRE>
protected void <B>removeFromBasket</B>(int&nbsp;customerId,
                                <A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>&nbsp;item)
                         throws java.lang.Exception</PRE>
<DL>
<DD>We must remove the customers_basket record and any associated customers_basket_attributes
 records.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>item</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
populateOptsForBasketItem</H3>
<PRE>
public void <B>populateOptsForBasketItem</B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                                      int&nbsp;priceId,
                                      int&nbsp;languageId,
                                      <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)
                               throws java.lang.Exception</PRE>
<DL>
<DD>The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the opts attribute and the productId attribute of the
 Basket object passed in.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#populateOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)">populateOptsForBasketItem</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>item</CODE> - <DD><CODE>priceId</CODE> - <DD><CODE>languageId</CODE> - <DD><CODE>a2bOptions</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getOptsForBasketItem(com.konakart.app.Basket, int, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
getOptsForBasketItem</H3>
<PRE>
protected <A HREF="../../../com/konakart/app/Option.html" title="class in com.konakart.app">Option</A>[] <B>getOptsForBasketItem</B>(<A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>&nbsp;item,
                                        int&nbsp;priceId,
                                        int&nbsp;languageId,
                                        <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;a2bOptions)
                                 throws java.lang.Exception</PRE>
<DL>
<DD>The customers_basket table contains a products_id field which is encoded like this :
 1{4}3{3}6 which means product of id==1 with product_options of id==4 and
 product_options_values of id==3 followed by product_options of id==3 and
 product_options_values of id==6. We have to read this encoded field called encodedProduct and
 create an array of Options and then set the productId attribute of the Basket object passed
 in.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>item</CODE> - <DD><CODE>priceId</CODE> - <DD><CODE>languageId</CODE> - <DD><CODE>a2bOptions</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of options
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createEncodedProduct(int, com.konakart.appif.OptionIf[])"><!-- --></A><H3>
createEncodedProduct</H3>
<PRE>
public java.lang.String <B>createEncodedProduct</B>(int&nbsp;productId,
                                             <A HREF="../../../com/konakart/appif/OptionIf.html" title="interface in com.konakart.appif">OptionIf</A>[]&nbsp;opts)</PRE>
<DL>
<DD>Create the encoded product The customers_basket table contains a products_id field which is
 encoded like this : 1{3}6{4}3 which means product of id==1 with product_options of id==3 and
 product_options_values of id==6 followed by product_options of id==4 and
 product_options_values of id==3. The order is very important (product option ids increasing)
 since this the encoded product has to match regardless of the ordering of the options in the
 ops array.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#createEncodedProduct(int, com.konakart.appif.OptionIf[])">createEncodedProduct</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>productId</CODE> - <DD><CODE>opts</CODE> - 
<DT><B>Returns:</B><DD>The encoded string</DL>
</DD>
</DL>
<HR>

<A NAME="mergeBaskets(java.lang.String, int)"><!-- --></A><H3>
mergeBaskets</H3>
<PRE>
public void <B>mergeBaskets</B>(java.lang.String&nbsp;sessionId,
                         int&nbsp;customerFromId)
                  throws java.lang.Exception</PRE>
<DL>
<DD>Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#mergeBaskets(java.lang.String, int)">mergeBaskets</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerFromId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
mergeBasketsWithOptions</H3>
<PRE>
public void <B>mergeBasketsWithOptions</B>(java.lang.String&nbsp;sessionId,
                                    int&nbsp;customerFromId,
                                    <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                             throws java.lang.Exception</PRE>
<DL>
<DD>Add all items from the basket of customerFrom to the basket of customerTo which is retrieved
 from the sessionId. This is done when a customer logs in, to move his temporary basket to his
 permanent basket.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#mergeBasketsWithOptions(java.lang.String, int, com.konakart.appif.AddToBasketOptionsIf)">mergeBasketsWithOptions</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerFromId</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getCustomerId(java.lang.String, int)"><!-- --></A><H3>
getCustomerId</H3>
<PRE>
protected int <B>getCustomerId</B>(java.lang.String&nbsp;sessionId,
                            int&nbsp;customerId)
                     throws java.lang.Exception</PRE>
<DL>
<DD>If the sessionId is null, we check the customerId to ensure that it is negative. If it is
 negative, this means that it is a non registered customer or a customer that hasn't logged in
 yet and so there is no customer mapped to the session id. Otherwise we ensure that the
 sessionId is valid and we don't use the customerId because we get the id from the session.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sessionId</CODE> - <DD><CODE>customerId</CODE> - 
<DT><B>Returns:</B><DD>Returns the customerId that should be used by the caller
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="checkBasketBelongsToCustomer(int, int)"><!-- --></A><H3>
checkBasketBelongsToCustomer</H3>
<PRE>
protected void <B>checkBasketBelongsToCustomer</B>(int&nbsp;customerId,
                                            int&nbsp;basketId)
                                     throws org.apache.torque.TorqueException,
                                            <A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></PRE>
<DL>
<DD>Throws an exception if the basket item doesn't belong to the customer.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>customerId</CODE> - <DD><CODE>basketId</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>org.apache.torque.TorqueException</CODE>
<DD><CODE><A HREF="../../../com/konakart/app/KKException.html" title="class in com.konakart.app">KKException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithStockInfo(com.konakart.appif.BasketIf[])"><!-- --></A><H3>
updateBasketWithStockInfo</H3>
<PRE>
public <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>updateBasketWithStockInfo</B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems)
                                   throws java.lang.Exception</PRE>
<DL>
<DD>Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfo(com.konakart.appif.BasketIf[])">updateBasketWithStockInfo</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>basketItems</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of basket items with updated stock level
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
updateBasketWithStockInfoWithOptions</H3>
<PRE>
public <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A>[] <B>updateBasketWithStockInfoWithOptions</B>(<A HREF="../../../com/konakart/appif/BasketIf.html" title="interface in com.konakart.appif">BasketIf</A>[]&nbsp;basketItems,
                                                     <A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)
                                              throws java.lang.Exception</PRE>
<DL>
<DD>Receives an array of basket items and updates each one with the current stock level. This is
 a useful check to make before checking out, to see whether the stock level is sufficient.
 
 If the product or any of the product attributes of a basket item no longer exist, then that
 basket item is not returned. This means that the size of the returned array may be smaller
 than the size of the array passed in as a parameter.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html#updateBasketWithStockInfoWithOptions(com.konakart.appif.BasketIf[], com.konakart.appif.AddToBasketOptionsIf)">updateBasketWithStockInfoWithOptions</A></CODE> in interface <CODE><A HREF="../../../com/konakart/blif/BasketMgrIf.html" title="interface in com.konakart.blif">BasketMgrIf</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>basketItems</CODE> - <DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Returns an array of basket items with updated stock level
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFetchProductOptions(com.konakart.appif.AddToBasketOptionsIf)"><!-- --></A><H3>
createFetchProductOptions</H3>
<PRE>
protected <A HREF="../../../com/konakart/appif/FetchProductOptionsIf.html" title="interface in com.konakart.appif">FetchProductOptionsIf</A> <B>createFetchProductOptions</B>(<A HREF="../../../com/konakart/appif/AddToBasketOptionsIf.html" title="interface in com.konakart.appif">AddToBasketOptionsIf</A>&nbsp;options)</PRE>
<DL>
<DD>Creates a FetchProductOptions object from an AddToBasketOptions
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>options</CODE> - 
<DT><B>Returns:</B><DD>Return a FetchProductOptions object</DL>
</DD>
</DL>
<HR>

<A NAME="getBasket(int)"><!-- --></A><H3>
getBasket</H3>
<PRE>
protected <A HREF="../../../com/konakart/app/Basket.html" title="class in com.konakart.app">Basket</A> <B>getBasket</B>(int&nbsp;basketId)
                    throws java.lang.Exception</PRE>
<DL>
<DD>Used to get a basket object using the primary key
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>basketId</CODE> - 
<DT><B>Returns:</B><DD>Returns a basket object
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="setCriteriaWithStandardAttributes(com.konakart.db.KKCriteria)"><!-- --></A><H3>
setCriteriaWithStandardAttributes</H3>
<PRE>
protected void <B>setCriteriaWithStandardAttributes</B>(<A HREF="../../../com/konakart/db/KKCriteria.html" title="class in com.konakart.db">KKCriteria</A>&nbsp;c)</PRE>
<DL>
<DD>Sets the criteria with the standard attributes so as not to have to repeat this code many
 times.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>c</CODE> - </DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/konakart/bl/BaseMgr.html" title="class in com.konakart.bl"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/konakart/bl/BasketMgr.OptionSortOrderComparator.html" title="class in com.konakart.bl"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/konakart/bl/BasketMgr.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BasketMgr.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2011 DS Data Systems UK Ltd.
</BODY>
</HTML>
